<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7" prefix="og: http://ogp.me/ns#"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8" prefix="og: http://ogp.me/ns#"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns#"><!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <title> - Eric Duncan</title>
  <meta name="author" content="Eric Duncan" />
  <meta name="description" content="May 26th, 2017 by Eric Duncan in embedded, stem AIY: Google Assistant Upgrades - May 2017 Like what you see here? Have kids? You may want to check & &hellip;" />
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="generator" content="Octopress 2.0 - Customized by @eduncan911" />
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@eduncan911">
  <meta property="og:title" content="" />
  <meta property="og:description" content="May 26th, 2017 by Eric Duncan in embedded, stem AIY: Google Assistant Upgrades - May 2017 Like what you see here? Have kids? You may want to check &hellip;" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="/maxresdefault.jpg" />
  <meta property="og:url" content="http://eduncan911.com/blog/index.html" />
  <meta property="og:site_name" content="Eric Duncan" />
  <meta property="og:video" content="" />
  
  <link rel="canonical" href="http://eduncan911.com/blog/index.html" />
  <link rel="alternate" href="/atom.xml" title="Eric Duncan" type="application/atom+xml" />
  <link rel="shortcut icon" href="/favicon.png" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" type="text/css" />
  <link rel="stylesheet" href="/stylesheets/screen.css" media="screen, projection" type="text/css" />
  <style type="text/css">
    header .blog-title a, header .blog-description { 
      color: #ffffff; 
      text-transform: lowercase;
    } 
  </style>
  <script src="/javascripts/modernizr-2.0.js"></script>

</head>
<body class="home blog">

  <header id="masthead" role="banner" class="site-head site-header">
    <div class="vertical" itemscope itemtype="http://schema.org/Article">
      <div class="site-head-content inner" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <h1 class="blog-title" itemprop="name"><a class="blog-logo" href='/' rel='home'>Eric Duncan</a></h1>
        <h2 class="blog-description" itemprop="jobtitle">spawning a race of beings</h2>
        <meta itemprop="givenname" content="Eric" />
        <meta itemprop="familyname" content="Duncan" />
        <meta itemprop="affiliation" content="eduncan911" />
        <meta itemprop="jobtitle" content="Software Architect" />
      </div>
    </div>
  </header>

  <main id="content" class="content" role="main">
  
  
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2017-05-26T18:25:14-04:00" content="2017-05-26T18:25:14-04:00" itemprop="datePublished">May 26<span>th</span>, 2017</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/embedded/' rel='category tag'>embedded</a>, <a class='category' href='/category/stem/' rel='category tag'>stem</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/stem/embedded/aiy-google-assistant-upgrades-may-2017.html" rel="bookmark">AIY: Google Assistant Upgrades - May 2017</a></h1>
        
        <meta itemprop="url" content="/stem/embedded/aiy-google-assistant-upgrades-may-2017.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p class='info info' data-title='More on STEM'>Like what you see here?  Have kids?  You may want to check out my STEM series <br/>of posts where I am introducing our children to STEM (Science Technology <br/>Engineering and Math) at early ages - and they are loving it.<br /><a href="/stem">http://eduncan911.com/stem</a></p>


<p>Google and the community have jumped in with both feet with the AIY Projects
release and the Voice HAT kit from MagPi, submitting dozens of PRs and updates
to both the Google Assistant SDK and Voice Recognizer projects.</p>

<ul>
<li><a href="https://github.com/google/aiyprojects-raspbian/pull/60">Ability to play a confirmation wav sound for Triggers (see <code>config/voice-recognizer.ini.default</code>)</a></li>
<li><a href="https://github.com/google/aiyprojects-raspbian/pull/33">Added Philips Hue action type</a></li>
<li><a href="https://github.com/google/aiyprojects-raspbian/pull/30">Added &ldquo;pi power off&rdquo; and &ldquo;pi reboot&rdquo; commands</a></li>
<li>Fixed distortion of voice command reply (e.g. &ldquo;Volume Up&rdquo;&rsquo;s reply)</li>
<li>Numerous fixes, especially for those hacking with custom setups.</li>
</ul>


<p>In addition, the Google Assistant SDK has been updated to support:</p>

<ul>
<li>Hot Words detection to activate with &ldquo;Ok Google&rdquo; or &ldquo;Hey Google&rdquo;, along with
the AIY Projects update to support it.</li>
<li>Alarms and Timers: &ldquo;Hey Google, set a time for 10 minutes.&rdquo;</li>
</ul>


<p>Before we get started, a quick refresher for those new to the projects.</p>

<h2>What is Google AIY?</h2>

<p>Google has jumped into the A.I. World of Amazon&rsquo;s Alexa and IBM&rsquo;s Watson with
their own version called the <a href="https://assistant.google.com/">Google Assistant</a>.  The difference being Google
brings strong search, wide integration and an open SDK.</p>

<h3>Google AIYProjects for Raspberry Pi: Voice Kit</h3>

<p><img src="/stem/i/google-aiy-voice-kit.jpg"></p>

<p><img src="/stem/i/google-aiy-voice-kit-assembly.png"></p>

<div class="embed-video-container"><iframe src="http://www.youtube.com/embed/7WtSdWSv7uo " frameborder="0" allowfullscreen></iframe></div>


<p>Google and the magazine MagPi teamed up to produce a simple AIY project called
the <a href="https://www.raspberrypi.org/magpi/issues/57/">Voice
Kit</a>, which is cardboard cube that houses a Raspberry Pi and a number
of components.  What&rsquo;s even more cool is everything that was included with the
kit, which came free with the MagPi magazine!</p>

<ul>
<li>Voice HAT</li>
<li>Dual-Microphone Board</li>
<li>Speaker</li>
<li>Arcade Button complete with matching Lamp Holder, LED and inline resistor &ndash;
and the resistor was even soldered inline already.</li>
<li>Quick disconnects soldered onto everything</li>
</ul>


<p>The only things required was a Raspberry Pi (I used a Pi 3), a power adapter and
a microSD card &ndash; standard things you should have laying around if your are a Pi
guru.</p>

<h3>Voice HAT</h3>

<p><img src="/stem/i/google-aiy-voice-kit-voice-hat-1.png"></p>

<p><img src="/stem/i/google-aiy-voice-kit-voice-hat-2.jpg"></p>

<p>HAT stands for <strong>Hardware Attached on Top</strong>, which are devices you simply
attach directly to your device.</p>

<p>The Voice HAT that is included with the Voice Kit, part of the AIY
Projects noted above, is impressive that it was free.  It has several GPIOs
available on it, along with several soldered on connectors.  Hardcore Raspberry
Pi gurus have balked, &ldquo;come on, a button and LED?&rdquo;  But really, Google is
targeting a younger audience with these components to make it an easier barrier
of entry into the world of embedded devices.</p>

<p>Essentially, this Voice HAT makes it really easy for anyone to get involved.
If only the SDKs and code were as simple (see upgrading below).</p>

<h3>Google Assistant SDK</h3>

<div class="embed-video-container"><iframe src="http://www.youtube.com/embed/Wsic12MXlsc " frameborder="0" allowfullscreen></iframe></div>


<p>Google released a new SDK recently called the <a href="https://developers.google.com/assistant/sdk/">Google Assistant SDK</a>.
The tag line reads:</p>

<blockquote><p>Bring hotword detection, voice control, natural language understanding, Google&rsquo;s smarts, and more to your devices.</p></blockquote>

<p>Currently the only SDK available seems to be Python, and only for Raspberry Pi.
But Google has said they are committed to supporting several mainstream
hardwares and other languages in the future.</p>

<h2>Upgrading your AIY Project</h2>

<p>Now back to the updates for May 2017.</p>

<p class='info warning' data-title='Warning'>If you want to be on the bleeding edge to enable these updates, be<br/>aware that pulling down the latest source code from the master branch is risky.<br/>It can break the entire setup, forcing you to reinstall everything from scratch.<br/>I have noticed the devs adding c.i. travis, coverage and tests, which really<br/>helps stabilize it.  But be aware, something could still slip through.</p>


<p>These are the instructions as of late May 2017.</p>

<p>So far, here&rsquo;s what we&rsquo;ll be doing:</p>

<ul>
<li>Update Google Assistant SDK in <code>~/assistant-sdk-python</code></li>
<li>Update AIY Project for Raspberry Pi in <code>~/voice-recognizer-raspi</code></li>
<li>Fixing Python dependencies</li>
<li>Setting the Voice Kit to auto-start.</li>
</ul>


<p>Here&rsquo;s all the scripts in one go. Log into your Raspberry Pi,
or use the Start Dev Terminal from the desktop:</p>

<pre><code># UPDATE GOOGLE ASSISTANT SDK
cd ~/assistant-sdk-python
git checkout master
git pull origin master

# UPDATE VOICE RECOGNIZER (AKA: AIY PROJECTS)
cd ~/voice-recognizer-raspi
git checkout master
git pull origin master

# UPDATE DEPENDENCIES
cd ~/voice-recognizer-raspi 
rm -rf env      # needs to be rm'd w/current version of install-deps.sh
scripts/install-deps.sh
</code></pre>

<p>As long as you did not modify any of the files, those should have ran smoothly.
If you, like me, were tinkering with the <code>src/main.py</code> and got a conflict,
erase the changes by using <code>git checkout &lt;file&gt;</code> (make a backup if you want
first with <code>cp &lt;file&gt; &lt;file&gt;~</code>).</p>

<p>At this point, you should be able to test everything is working:</p>

<pre><code>sudo systemctl stop voice-recognizer.service    # if you had it running
cd ~/voice-recognizer-raspi
source env/bin/activate
src/main.py 
</code></pre>

<p>See if you got the latest SDK by testing the &ldquo;Timer&rdquo; functionality:</p>

<pre><code>&gt; "set a timer for 10 seconds"
&lt; "You got it, setting a timer for 10 seconds. Starting now."
</code></pre>

<p><em>&ldquo;OK Google&rdquo;</em> needs a bit more configuration, see below.</p>

<p><del><em>&ldquo;Pi reboot&rdquo;</em> and <em>&ldquo;Pi Power Off&rdquo;</em> needs some tweaking.  I&rsquo;ve <a href="https://github.com/google/aiyprojects-raspbian/issues/69">opened an
issue</a>
suggesting we change the leading word &ldquo;Pi&rdquo; to something else, because it isn&rsquo;t
detected very well.</del> It&rsquo;s been changed to <em>&ldquo;Raspberry Reboot&rdquo;</em> and <em>&ldquo;Raspberry Power Off.&rdquo;</em></p>

<h2>Review the new Config Files</h2>

<p>There&rsquo;s been a lot of movement lately.  You may want to backup your existing config
file and bring over the newest versions, then re-implement your configurations.</p>

<pre><code># back them up first
cp ~/.config/status-led.ini ~/.config/status-led.ini~
cp ~/.config/voice-recognizer.ini ~/.config/voice-recognizer.ini~

# copy the new ones over
cp ~/voice-recognizer-raspi/config/status-led.ini.default ~/.config/status-led.ini
cp ~/voice-recognizer-raspi/config/voice-recognizer.ini.default ~/.config/voice-recognizer.ini

# open and review the new options
nano ~/.config/voice-recognizer.ini
</code></pre>

<p>You&rsquo;ll notice the new &ldquo;ok-google&rdquo; trigger as well as the trigger sound and more.</p>

<p>If you want this automated in the future, add a <code>rm ~/.config/voice-recognizer.ini</code> to the
upgrade steps before running the <code>scripts/install-deps.sh</code> file &ndash; as this file actually
copies over the latest config files, if they don&rsquo;t exist.</p>

<h2>Enabling <em>&ldquo;OK Google&rdquo;</em> and <em>&ldquo;Hey Google&rdquo;</em> Hot Words</h2>

<p>This process is preferred over the manual method talked about in <a href="https://www.raspberrypi.org/forums/viewtopic.php?f=114&amp;t=183932">Raspberry Pi forums</a>.
For one, it won&rsquo;t break your installation by modifying files that will create a
conflict if you update the repository to the latest.</p>

<p><del>There is a <a href="https://github.com/google/aiyprojects-raspbian/pull/64">pending pull-request to do exactly
this</a>.  Considering the current
velocity of the repo, I&rsquo;d say wait a few more days and then just update per
instructions above.</del></p>

<p><del>Once <a href="https://github.com/google/aiyprojects-raspbian/pull/64">PR #64</a> is merged
into master, you can switch the trigger to use the hot words.  So keep
monitoring that PR and when you see the purple tag say &ldquo;MERGED&rdquo;, follow the
instructions above again to <code>git pull</code> the latest and newest dependencies.</del><br/>
It&rsquo;s all merged now!  Though, it only supports ARMv7 and newer (sorry Pi Zeros and Pi Ws).</p>

<p>After performing all the upgrades above, test the new trigger:</p>

<pre><code>sudo systemctl stop voice-recognizer.service    # if you had it running
cd ~/voice-recognizer-raspi 
source env/bin/activate
src/main.py --trigger="ok-google"
</code></pre>

<p>If you want this to stick, to be persisted for the auto-start services, edit the
<code>voice-recognizer.ini</code> file as per the original setup docs:</p>

<pre><code>nano ~/.config/voice-recognizer.ini
</code></pre>

<p>And make the trigger say &ldquo;ok-google&rdquo;:</p>

<pre><code># Select the trigger: gpio (default), clap, ok-google.
trigger = ok-google
</code></pre>

<p>You can only have one trigger with the current project at this time.  Feel free
to submit a pull request to enable multiple triggers.</p>

<p>Press <code>CTRL-X</code> and <code>Y</code> to save.  Then restart the service:</p>

<pre><code>sudo systemctl restart voice-recognizer.service 
</code></pre>

<p>Now, speaking <em>&ldquo;OK Google&rdquo;</em> or <em>&ldquo;Hey Google&rdquo;</em> should work.</p>

<p>Try having a <strong><em>conversation</em></strong> with <em>&ldquo;Hey Google&rdquo;</em> to confirm the SDK continues your
follow up questions:</p>

<pre><code>&gt; "Hey Google, how far away is Japan?"
&lt; "Japan is 6,000 miles away as way of the crow flies."
&gt; "Hey Google, and from California?"
&lt; "Japan is 5,000 miles away from California"
</code></pre>

<p>Notice how the SDK remembered you previously searched for the distance of Japan?
This was a feature that Google announced back in 2015, contextually aware
searches of continued searches.  And it has been brought over to the Assistant
SDK.</p>

<p>Try the Trivia Game for a long extensive test of the <strong>conversation</strong>
feature:</p>

<pre><code>&gt; "Hey Google, let's play trivia!"
</code></pre>

<p>I didn&rsquo;t know wolverines could climb trees.</p>

<h2>Setting to Auto-Start on Reboot/Power On</h2>

<p>If you want it running all the time to let the family play Trivia
every morning, set your services to start on boot:</p>

<pre><code># UPDATE AUTO-START SERVICES ON BOOT (optional)
cd ~/voice-recognizer-raspi 
sudo scripts/install-services.sh 
sudo systemctl start status-led.service 
sudo systemctl start status-monitor.service
sudo systemctl start voice-recognizer.service 
sudo reboot
</code></pre>

<p>Wait about 30 seconds and see if the button starts flashing again.</p>

<h2>Summary</h2>

<p>You gotta love Google&rsquo;s Cardboard VR gimmick when they came out.  People were
paying $1000 for VR headsets, and here&rsquo;s Google with a $15 kit to do the same.
Sure, the experience is better on the $1000 kits (I myself have spent a lot of
time with the HTC Vive).  But there&rsquo;s something about going back to that
cardboard clip on that makes you feel like Google enjoys shaking up industries.</p>

<p>And here we are, with Google jumping into the A.I. devices with a bottom-dollar
hackable entry that anyone with a few bucks can run out and pick up.</p>

<p>Though, updating it, especially for non-Python gurus, is a PITA and subscribes
most people who can only enjoy this to a very small niche of developers, who
happen to know Python and git.</p>

<p>Feel free to reach out in the comments for help.</p>

<h2>Troubleshooting: Missing Dependencies</h2>

<p>Hopefully by the time you read this and try to implement the changes, they will
have fixed all the missing dependencies.  If not, continue below for some hints
on how to fix them.</p>

<h3>Activate virtualenv &ldquo;env&rdquo;</h3>

<p>Remember to activate your <code>env/bin/activate</code> before doing any of this, to keep
it in the same virtualenv.</p>

<pre><code>cd ~/voice-recognizer-raspi
source env/bin/activate 
</code></pre>

<p>This keeps everything installed in the original location that the
<code>install-deps.sh</code> file put them.  Don&rsquo;t worry, it&rsquo;s a Python thing.</p>

<h3>Google Assistant SDK manual install</h3>

<p>I had to install the latest SDK to get the hot word detection fixed working in
the initial testing of the <a href="https://github.com/drigz/aiyprojects-raspbian/tree/assistant-library">branch by drigz</a>:</p>

<pre><code>pip install --upgrade https://github.com/googlesamples/assistant-sdk-python/releases/download/0.3.0/google_assistant_library-0.0.2-py2.py3-none-linux_armv7l.whl
</code></pre>

<p>That was 2 days ago.  As of now, it is part of pypi (part of the normal
dependency chain).  So it should be fixed and you shouldn&rsquo;t have to do this.</p>

<h3>ImportErrors</h3>

<p>You may eventually see some import errors like this:</p>

<pre><code>$ cd ~/voice-recognizer-raspi 
$ source env/bin/activate
$ src/main.py
Traceback (most recent call last):
  File "src/main.py", line 32, in &lt;module&gt;
    import tts
  File "/home/pi/voice-recognizer-raspi/src/tts.py", line 24, in &lt;module&gt;
    import numpy as np
ImportError: No module named 'numpy'
</code></pre>

<p>Running the dependency chain that Google supplies should be the first step.</p>

<pre><code>cd ~/voice-recognizer-raspi 
scripts/install-deps.sh
</code></pre>

<p>If you continue to see import errors, than try to install them.  They seem to be
good at picking very reliable dependencies.</p>

<pre><code>pip install &lt;module-name-from-the-ImportError&gt;
</code></pre>

<p>For example:</p>

<pre><code>$ pip install numpy
Collecting numpy
  Downloading numpy-1.12.1.zip (4.8MB)
    100% |████████████████████████████████| 4.8MB 60kB/s
Building wheels for collected packages: numpy
  Running setup.py bdist_wheel for numpy ... -
done
</code></pre>

<p>NOTE: Numpy takes like 20 minutes to compile on a Pi3.  You&rsquo;ll have to sit and
wait.</p>

<p>Hopefully that continues to fix up the missing deps.</p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="AIY: Google Assistant Upgrades - May 2017" href="/stem/embedded/aiy-google-assistant-upgrades-may-2017.html#comments" data-disqus-url="http://eduncan911.com/stem/embedded/aiy-google-assistant-upgrades-may-2017.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2016-04-03T13:13:34-04:00" content="2016-04-03T13:13:34-04:00" itemprop="datePublished">Apr 3<span>rd</span>, 2016</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/software/' rel='category tag'>software</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/software/how-to-enable-bash-on-windows-10-preview.html" rel="bookmark">How to Enable Bash on Windows 10 Preview</a></h1>
        
        <meta itemprop="url" content="/software/how-to-enable-bash-on-windows-10-preview.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p>Today I am going to outline how you can install and use the <a href="http://www.hanselman.com/blog/DevelopersCanRunBashShellAndUsermodeUbuntuLinuxBinariesOnWindows10.aspx">Linux User Mode
(UML)</a>
in Windows 10 based on the new <a href="https://blogs.windows.com/buildingapps/2016/03/30/run-bash-on-ubuntu-on-windows/">Windows Subsystem for Linux
(WSL)</a>
that was announced at Windows Build 2016.</p>

<h2>Why Bother?  OS X works fine.</h2>

<p>I am writing this jamming away on my Macbook Pro 15&#8221; connected to three external
1080p 120 Hz 3D monitors, my precision mouse and CODE mechanical keyboard.  Once
running ArchLinux for over a year, I&rsquo;ve recently went back to OS X purely for
the user experience.  I miss my Arch installs; but, I don&rsquo;t miss the annoyances
around docking/undocking my tri-monitor setup and switching from HiDPI and my
1080p monitors.  It was a painful experience when disconnecting and reconnecting.</p>

<p>I also ran Windows 10 natively on it for a few months as I got annoyed at VMware
crashing Arch all the time.  I was doing my C# Mono work in my Linux VM anyways
and not natively on Windows.  Battery life sucked with the VM though.</p>

<p>OS X just nails HiDPI perfectly when docking and undocking, switching primary
monitors, etc.</p>

<p>No.  The real reason I am interested in Linux on Windows is:</p>

<ul>
<li>Going back to Desktop Development</li>
</ul>


<p>I have a 4.8 Ghz hex-core, 5300+ GPU core gaming beast of a machine (also
connected to those same 3 monitors) just sitting idle, unused for months.
ArchLinux natively on that Asus motherboard was ok; but, I miss my Windows games
and no longer could control my TEC waterchiller (it was Windows software I wrote
for it).</p>

<p>All Windows was missing was my GNU Linux tooling.  I spent the better part of a
week replacing all OS X versions of the tools (sed, ack, grep, etc) with the
real GNU versions.  OS X has Homebrew; Windows now has WSL.</p>

<p>To have the ability to have Linux natively available on Windows is just perfect
for my desktop machine.</p>

<p>I only develop using NeoVim + Tmux anyhow; so, I don&rsquo;t need GUI or Windows
interactions.  I just need bash and proper screen redraw with 256 colors.<br/>
That&rsquo;s it.</p>

<h2>WSL and Linux User Mode RTM Release Date</h2>

<p>It was suspiciously awkward that nothing made note of its availability; not from
the keynote nor from Hanselman&rsquo;s and MSDN&rsquo;s introduction blog posts.  All that
was said was that the Windows 10 Insider Preview refresh released in January
2016 contained this new WSL platform, and that the bash tooling would be
released for it soon.  There was even a Windows Insider/dev that noticed the new
WSL binaries/framework available back in January, before it was announced.</p>

<p>So a few of us kept poking and prodding at our MS resources, trying to get our
hands on it.</p>

<p>It turns out that you have to take a few initiatives to get your system ready
for UML.  This experience has taught me the <em>new</em> way in which MS will be
releasing features into Windows going forward.</p>

<h2>Enough Already, How to Install It?</h2>

<p>First, you can&rsquo;t install it on your existing Windows 10.  Not for some time, not
until it is ready for public consumption.  Currently Microsoft has said it will
be part of the Anniversary build due out this summer.</p>

<p>This post is about getting access to the Insider Preview edition, before it is
released.</p>

<p>Here&rsquo;s the overview of what you need to do:</p>

<ul>
<li>Download Windows Insider Preview 14295 (14316 ISO is not out as of the time
this writing.  But there is a Windows Update to upgrade to 14316).</li>
<li>Install it (recommended in a VM, as Previews usually expire).</li>
<li>Go straight to Start &ndash;> Settings &ndash;> Updates and Security.</li>
<li>Under &ldquo;Update settings&rdquo;, click Advanced options.</li>
<li>Under &ldquo;Get Insider Preview Builds&rdquo;, click &ldquo;Fix me&rdquo; or whatever may show here.</li>
</ul>


<p>You should end up with a slider, asking you to <em>Choose your insider level</em>.
Like this:</p>

<p><img src="/blog/images/windows-insider-preview-builds.png" alt="Windows Insider Preview slider level" /></p>

<p>Move it all the way to the right, for <em>Fast</em>.</p>

<p>The next series of mouse-contortions is to turn on <em>Developer Mode</em>.</p>

<ul>
<li>Start &ndash;> Settings &ndash;> Update &amp; security</li>
<li>On the left, click <strong>For developers</strong></li>
<li>Select the option for <strong>Developer mode</strong></li>
<li>Restart.</li>
</ul>


<p>You should be able to run Windows Update and see that <strong>Windows 10 Insider Preview 14316</strong> is available.</p>

<p><img src="/blog/images/windows-insider-preview-build-14316.png" alt="Windows 10 Insider Preview 14316 Update" /></p>

<p>Download and install.  You may want to go make some tea.</p>

<p>Another set of mouse-ninja-moves is to add the Bash features:</p>

<ul>
<li>click <strong>Start</strong> and type <em>&ldquo;Windows Features&rdquo;</em> and choose <em>&ldquo;Turn Windows
features on or off&rdquo;</em></li>
<li>scroll down and enable <strong><em>&ldquo;Windows Subsystem for Linux (Beta)&rdquo;</em></strong></li>
<li>Click OK and Restart.</li>
</ul>


<p><img src="/blog/images/windows-subsystem-for-linux-enabling.png" alt="Enabling Windows Subsystem for Linux" /></p>

<h2>Install Bash on Ubuntu On Windows</h2>

<p>If only we were done.  We now need to download and install the <strong><em>Bash on Ubuntu
on Windows</em></strong> desktop application, which currently seems to be done via a &ldquo;bash&rdquo;
command line utility.</p>

<ul>
<li>Launch Console (Start &ndash;> type &ldquo;CMD&rdquo; and press Enter)</li>
<li>Enter &ldquo;bash&rdquo; at the prompt and press &ldquo;Enter&rdquo;.</li>
<li>Follow the prompt to download and install Ubuntu 14.04 LTS ISO.</li>
<li>Once done, <strong><em>REBOOT</em></strong> (or at least I did).</li>
</ul>


<p>Once rebooted, you now have a new Desktop app you can launch called <strong><em>Bash on
Ubuntu on Windows</em></strong></p>

<p><img src="/blog/images/windows-bash-on-ubuntu-on-windows-subsystem-for-linux.png" alt="Bash on Ubuntu on Windows desktop app" /></p>

<p>I thought once I hit &ldquo;y&rdquo; to install bash, I was in bash.  It sure seemed like it
but I had a few issues poking around.  I went ahead and rebooted and noticed
a new app was installed.</p>

<h2>Quirky</h2>

<p>A number of things weren&rsquo;t working with my default installation.  I&rsquo;ll work on
those and will update this post, or create another walk-through.</p>

<p>Stay tuned!</p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="How to Enable Bash on Windows 10 Preview" href="/software/how-to-enable-bash-on-windows-10-preview.html#comments" data-disqus-url="http://eduncan911.com/software/how-to-enable-bash-on-windows-10-preview.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2016-04-01T12:43:22-04:00" content="2016-04-01T12:43:22-04:00" itemprop="datePublished">Apr 1<span>st</span>, 2016</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/software/' rel='category tag'>software</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/software/fix-slow-scrolling-in-vim-and-neovim.html" rel="bookmark">Fix Slow Scrolling in VIM and Neovim</a></h1>
        
        <meta itemprop="url" content="/software/fix-slow-scrolling-in-vim-and-neovim.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p>I am three months into my (4th) new development environment that I have bounced
around over the last three decades.  I finally put in the time to learn
vim/neovim to get away from graphical IDEs and return back to shell development.
With this brings a whole new timesuck of constantly tweaking your <code>.vimrc</code> to
the never reaching goal of perfection.</p>

<p>Now that I have my plugins and environments setup, I recently enabled a setting
to help me find my cursor faster in my <code>.vimrc</code> file.</p>

<pre><code>set cursorline
</code></pre>

<p>I was warned in the vim documentation that <em>&ldquo;Will make screen redrawing
slower.&rdquo;</em>  Little did I know just how slow it would make it crawl! I first
noticed it with neovim.  To confirm it wasn&rsquo;t neovim itself, I attempted to load
vim with the same config and oh wow how horrible slow things scrolled.  CPU
usage of both neovim and vim spiked to 99% on OS X under iterm2 and tmux.</p>

<p>The issue is exasperated when you increase your keyboard&rsquo;s key repeat and
shorten the repeat delay.  OS X is not fast enough for me; so, I have to use
<em>Karabiner</em>&rsquo;s Key Repeat feature to speed things up greatly (Delay @ 150ms, Key
Repeat at 10ms is just right).</p>

<p>A few quick Google searches surfaced the issue: <code>cursorline</code>, and similar
<code>cursorcolumn</code> was the issue when you have a plugin that highlights a bunch of
text.  Most people were having issues with Ruby&rsquo;s code plugins.</p>

<p>I was using <code>vim-go</code>, and its highlighting, when I noticed the issue.</p>

<p>This <a href="http://stackoverflow.com/a/20519492/56693">Stackoverflow answer</a> is, as the comments say,
a lifesaver.  Basically it outlines the very reason why scrolling is slow and
how to debug exactly what regex pattern is causing it.</p>

<h2>How to Debug Slow Scrolling in VIM</h2>

<p>You can debug what is slowing things down by first enabling the vim option
called <code>syntime</code> which is adequately defined as <em>&ldquo;When scrolling is slow.&rdquo;</em></p>

<pre><code>:syntime on
</code></pre>

<p>Then scroll up and down a lot, get it to bog down.  I also recommend doing this
within vim instead of neovim to really make things slow.  After 10 seconds or
so, generate a report with the following.</p>

<pre><code>:syntime report
</code></pre>

<p>For me, here&rsquo;s the top 10 results when a <code>FileType</code> of <code>go</code> was being scrolled:</p>

<pre><code>TOTAL      COUNT  MATCH   SLOWEST     AVERAGE   NAME               PATTERN
2.482624   7066   0       0.009561    0.000351  goInterfaceDef     \(type\s\+\)\@&lt;=\w\+\(\s\+interface\s\+{\)\@=
2.476090   7066   0       0.008820    0.000350  goStructDef        \(type\s\+\)\@&lt;=\w\+\(\s\+struct\s\+{\)\@=
2.457858   7278   212     0.008375    0.000338  goFunction         \(func\s\+\)\@&lt;=\w\+\((\)\@=
2.440439   7066   0       0.007554    0.000345  goFunction         \()\s\+\)\@&lt;=\w\+\((\)\@=
0.757577   7180   114     0.001380    0.000106  goInterface        \(.\)\@&lt;=\w\+\({\)\@=
0.745827   7104   38      0.001105    0.000105  goStruct           \(.\)\@&lt;=\w\+\({\)\@=
0.640945   7064   0       0.004620    0.000091  goSpaceError       \(\(^\|[={(,;]\)\s*&lt;-\)\@&lt;=\s\+
0.223065   12827  5910    0.000239    0.000017  goMethod           \(\.\)\@&lt;=\w\+\((\)\@=
0.071478   7064   0       0.000128    0.000010  goSpaceError       \(\(&lt;-\)\@&lt;!\&lt;chan\&gt;\)\@&lt;=\s\+\(&lt;-\)\@=
0.058679   7064   0       0.000100    0.000008  goSpaceError       \(\(\&lt;chan\&gt;\)\@&lt;!&lt;-\)\@&lt;=\s\+\(\&lt;chan\&gt;\)\@=
</code></pre>

<p>Immediately you can see it is <code>vim-go</code>&rsquo;s regex patterns that is slowing down the
scrolling.  Interesting how there were two <code>goFunction</code> regex patterns caught,
and both are slow.</p>

<p>At first glance, there doesn&rsquo;t seem to be any big issues with them.  Just a lot
of matching.  Running the first one through regex101.com shows the following
definition:</p>

<pre><code>/\(type\s\+\)\@&lt;=\w\+\(\s\+interface\s\+{\)\@=/
\( matches the character ( literally
type matches the characters type literally (case sensitive)
\s match any white space character [\r\n\t\f ]
\+ matches the character + literally
\) matches the character ) literally
\@ matches the character @ literally
&lt;= matches the characters &lt;= literally
\w match any word character [a-zA-Z0-9_]
\+ matches the character + literally
\( matches the character ( literally
\s match any white space character [\r\n\t\f ]
\+ matches the character + literally
interface matches the characters interface literally (case sensitive)
\s match any white space character [\r\n\t\f ]
\+ matches the character + literally
{ matches the character { literally
\) matches the character ) literally
\@ matches the character @ literally
= matches the character = literally
</code></pre>

<p>That is a lot of matching in a single regex!  Perhaps vim&rsquo;s regex interrupter is
just that bad.  I notice a significant speedup when using Neovim over Vim; but,
it is still very slow.</p>

<h2>The Fix for Slow Scrolling in VIM</h2>

<p>Now, I could spend some time debugging this regex, inserting conditionals and
groupings in an attempt to limit the amount of matching which should in theory
speed that up.  But I need to get some work done.</p>

<p>One could just toggle off <code>cursorline</code> when it is slow and move on and toggle it
back on with the same command later.  Set it to a mapped key to make it faster.</p>

<pre><code>:set cursorline!
</code></pre>

<p>An option that I found in the help that does speed things up is <code>lazyredraw</code>.<br/>
Though, it is tolerable with Neovim, vim was still a little bit choppy.  I have
this enabled as default in my <code>.vimrc</code> regardless.</p>

<pre><code>:set lazyredraw
</code></pre>

<p>Some people have gotten success by disabling syntax highlighting after 128
columns and/or minlines set to 256.  Neither worked for my environment though.</p>

<pre><code>set synmaxcol=128
syntax sync minlines=256
</code></pre>

<p>Personally, I just disabled some of (but not all of) <code>vim-go</code>&rsquo;s syntax
highlighting because I visually value the  <code>cursorline</code> highlighting more
than syntax highlight.  Besides, <a href="https://groups.google.com/forum/#!msg/golang-nuts/hJHCAaiL0so/kG3BHV6QFfIJ">Rob Pike calls syntax highlighting
juvenile</a>.</p>

<p>This option is very <code>plugin</code> specific; so, your mileage will vary of rather
your vim plugin supports selective disabling of syntax highlighting.</p>

<p>For <code>vim-go</code>, they have highlighting disabled by default and you must explicitly
enable it.  To disable syntax highlighting, just remove what you did to enable it
in the first place in your <code>.vimrc</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function! VimGoSetup()
</span><span class='line'>  " vim-go related mappings
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;r &lt;Plug&gt;(go-run)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;b &lt;Plug&gt;(go-build)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;t &lt;Plug&gt;(go-test)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;i &lt;Plug&gt;(go-info)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;s &lt;Plug&gt;(go-implements)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;c &lt;Plug&gt;(go-coverage)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;e &lt;Plug&gt;(go-rename)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;gi &lt;Plug&gt;(go-imports)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;gI &lt;Plug&gt;(go-install)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;gd &lt;Plug&gt;(go-doc)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;gv &lt;Plug&gt;(go-doc-vertical)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;gb &lt;Plug&gt;(go-doc-browser)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;ds &lt;Plug&gt;(go-def-split)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;dv &lt;Plug&gt;(go-def-vertical)
</span><span class='line'>  au FileType go nmap &lt;Leader&gt;dt &lt;Plug&gt;(go-def-tab)
</span><span class='line'>  let g:go_auto_type_info = 1
</span><span class='line'>  let g:go_fmt_command = "gofmt"
</span><span class='line'>  let g:go_fmt_experimental = 1
</span><span class='line'>  let g:go_dispatch_enabled = 0 " vim-dispatch needed
</span><span class='line'>  let g:go_metalinter_autosave = 1
</span><span class='line'>  let g:go_metalinter_autosave_enabled = ['vet', 'golint']
</span><span class='line'>  let g:go_metalinter_enabled = ['vet', 'golint', 'errcheck']
</span><span class='line'>  let g:go_term_enabled = 0
</span><span class='line'>  let g:go_term_mode = "vertical"
</span><span class='line'>" let g:go_highlight_functions = 1
</span><span class='line'>  let g:go_highlight_methods = 1
</span><span class='line'>" let g:go_highlight_structs = 1
</span><span class='line'>" let g:go_highlight_interfaces = 1
</span><span class='line'>  let g:go_highlight_operators = 1
</span><span class='line'>  let g:go_highlight_extra_types = 1
</span><span class='line'>  let g:go_highlight_build_constraints = 1
</span><span class='line'>  let g:go_highlight_chan_whitespace_error = 1
</span><span class='line'>endfunction
</span><span class='line'>call VimGoSetup()</span></code></pre></td></tr></table></div></figure>


<p>You can see the three lines I commented out above.  I still get plenty of syntax
highlighting without it.  So I&rsquo;m good with this for now.</p>

<p>Finally, one could just use more of PageUp/PageDown to move around the file.</p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="Fix Slow Scrolling in VIM and Neovim" href="/software/fix-slow-scrolling-in-vim-and-neovim.html#comments" data-disqus-url="http://eduncan911.com/software/fix-slow-scrolling-in-vim-and-neovim.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2015-08-31T18:03:55-04:00" content="2015-08-31T18:03:55-04:00" itemprop="datePublished">Aug 31<span>st</span>, 2015</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/hardware/' rel='category tag'>hardware</a>, <a class='category' href='/category/technology/' rel='category tag'>technology</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/technology/hardware/google-authenticator-databases-move-copy-fix.html" rel="bookmark">Google Authenticator&#8217;s Databases: Copy, Move and Fix</a></h1>
        
        <meta itemprop="url" content="/technology/hardware/google-authenticator-databases-move-copy-fix.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p><img src="/blog/images/FeatureImage-GoogleAuthenticator.jpg" title="&#34;Google Authenticator&#34;" alt="&#34;Google Authenticator&#34;"></p>

<p>Google Authenticator is a two-factor application that runs on your mobile or tablet device.  Typically you only run it on one device because the secrets you store in its databases cannot be shared between devices.</p>

<p>In this post, I explain some technical details about this database and how you can exploit the details for your gain (from an Android&rsquo;s perspective).</p>

<h2>Factor Resets</h2>

<p>So when an Android update comes out, I can not update.  I am forced to backup my configurations first, upgrade the device and then restore my configurations after the apps are reloaded.  The reason I have to do this is because I run a custom bootloader.  I also encrypt my device which further mandates a factor reset upon unlocking and locking to regain root access.  What a PITA.</p>

<p>But these annoyances have afforded me the luxury of learning more details about the apps and system processes, along with their configurations.</p>

<p>I use custom bootloaders to gain access to the device in the event of a MMC failure (has happened once, I was able to get important data off of it before it totally was lost).</p>

<p>Encryption is used because, well, I&rsquo;m just <a href="http://motherboard.vice.com/read/fbi-director-if-apple-and-google-wont-decrypt-phones-well-force-them-to">paranoid like that</a>.</p>

<h2>Google&rsquo;s Warning: Stay away from GA&rsquo;s Databases!</h2>

<p>Google has stated (insert ref here) that you should not be copying your Google Authenticator&rsquo;s databases from device to device.  This is true as it could lead to you leaking your secrets by, say, copying the file to your cloud storage to sync to another device.</p>

<p>Not only have you given your cloud provider access to your secrets (that is now backed up and replicated on their systems); but, if hackers gain access to your cloud platform (which several have Undelete options!), that&rsquo;s game over man.</p>

<p>Me?  I always copy directly from my device to a USB stick.  Do my thing on the device and when ready, push it back from the USB stick to my device.  When done, wipe the USB stick (or write an ISO to it, which I do very very often).</p>

<h2>Why Even Bother?</h2>

<p>So why do I go to such extremes?  Google&rsquo;s very own security supplies a way for you to move your secret (a new secret) to a new device, a process I consider the absolute model of perfection of moving your secrets.</p>

<p>One answer: 17.</p>

<p>I have 17 Google Authenticator &ldquo;secrets&rdquo; on my device for 17 services across my personal services and several clients&#8217; access.</p>

<p>Have you ever tried to regain access to an account once you lost your two-factor authentication secret?  I have.  I have a 2:5 win/loss ratio when I had to play that game.  No more.</p>

<p>So, it&rsquo;s time to hack this thing to take matters into my own hands.</p>

<p>This, ladies and gentlemen, is why I own Android&hellip;</p>

<h2>Google Authenticator&rsquo;s Database</h2>

<p>If you got Root, then you have more options.</p>

<p>On Android, the Google Authenticator <code>databases</code> file is located at:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/data/data/com.google.android.apps.authenticator2/databases/</span></code></pre></td></tr></table></div></figure>


<p>Within this directory is a &lsquo;databases&rsquo; file:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@hammerhead:/data/data/com.google.android.apps.authenticator2/databases # ls -l
</span><span class='line'>-rwxrw-rw- u0_a92     u0_a92        16384 2015-06-22 19:17 databases</span></code></pre></td></tr></table></div></figure>


<p>And no, that&rsquo;s not a misprint.  There is a directory called <code>databases</code> with a file in it called <code>databases</code>.</p>

<h2>Permissions</h2>

<p>The first dumbfounded thing I found during my first attempt at copying my second version of GA&rsquo;s databases is the permissions.  Take a look closely at the <code>ls</code> command above.  Notice anything?</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-rwx------
</span><span class='line'>World: Read/Write/Execute
</span><span class='line'>
</span><span class='line'>----rw----
</span><span class='line'>Group: Read/Write
</span><span class='line'>
</span><span class='line'>-------rw-
</span><span class='line'>User: Read/Write</span></code></pre></td></tr></table></div></figure>


<p>WTF?  Everyone has access to this file?</p>

<p>During my first restore, I had Google Authenticator constantly crashing on launch.  Come to find out, it did not like my <code>700</code> permissions access I first gave it.  Only after frustration of the app crashing over and over did I just give it full 777 permissions&hellip;  And the app opened without a crash?  It needs world read/write?</p>

<p>I then found out the parent <code>databases</code> directly itself needed the same permissions.</p>

<p>Now, I know that Android has some special user-space for each app to isolate each app&rsquo;s access to the rest of the file system.  Perhaps it&rsquo;s enough to <em>trust</em> Android in that its app isolation is good enough.</p>

<p>I don&rsquo;t trust anyone with this data; but, unfortunately if you want GA running you have to set the correct permissions at this time:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># NOTE: You will need to be "su" root user to run these
</span><span class='line'>
</span><span class='line'>cd /data/data/com.google.android.apps.authenticator2/
</span><span class='line'>chmod 766 databases
</span><span class='line'>cd databases/
</span><span class='line'>chmod 766 databases</span></code></pre></td></tr></table></div></figure>


<p>The parent <code>databases/</code> folder, and the <code>databases</code> file itself requires world read and write access &ndash; or the Google Authenticator&rsquo;s app won&rsquo;t even open (crashes).</p>

<h2>Ownership</h2>

<p>In addition, and what stemmed me to write this post, is I had another issue.  I was not able to add any new entries to my Google Authenticator.  I had the permissions right, so I thought.</p>

<p>Upon inspection, I could see that the directories surrounding the databases/ directory was owned by a different user.  In my case, that userid was <code>u0_a92</code>.</p>

<p>I am not sure if this was the user space dedicated to this app or not.  But in any case, once I set the owner and group to this user, I was able to add new entries:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># NOTE: you will need to be "su" root user to run these
</span><span class='line'># NOTE 2: perform an "ls -l" like I did above and change u0_a92 to match.
</span><span class='line'>
</span><span class='line'>cd /data/data/com.google.android.apps.authenticator2/
</span><span class='line'>chown u0_a92:u0_a92 databases
</span><span class='line'>cd databases
</span><span class='line'>chown u0_a92:u0_a92 databases</span></code></pre></td></tr></table></div></figure>


<p>And now I was able to add new entries.</p>

<h2>Inspecting the Database</h2>

<p>The <code>databases</code> file itself is a <code>sqlite</code> database.  This makes it easy to write an application to look at the database and query directly against it.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sqlite3 ./databases
</span><span class='line'>SQLite version 3.8.11.1 2015-07-29 20:00:57
</span><span class='line'>Enter ".help" for usage hints.
</span><span class='line'>sqlite&gt; .fullschema
</span><span class='line'>CREATE TABLE android_metadata (locale TEXT);
</span><span class='line'>CREATE TABLE accounts (_id INTEGER PRIMARY KEY, email TEXT NOT NULL, secret TEXT NOT NULL, counter INTEGER DEFAULT 0, type INTEGER, provider INTEGER DEFAULT 0, issuer TEXT DEFAULT NULL, original_name TEXT DEFAULT NULL);
</span><span class='line'>/* No STAT tables available */</span></code></pre></td></tr></table></div></figure>


<p>Here above we can see two tables in this file.  An <code>android_metadata</code> table and an <code>accounts</code> table.</p>

<p>Run this command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sqlite&gt; SELECT * FROM accounts;</span></code></pre></td></tr></table></div></figure>


<p>Did you notice everything is in the clear here?  No encryption?</p>

<p>It was so much so that I started to copy and paste my output of 17 accounts; but, it was too much to redact.  I figured I&rsquo;ll just posted the schema above and let you query your own database.</p>

<h2>Takeaways</h2>

<p>There a few things to take away from all of this.</p>

<p>Google Authenticator has world read/write permissions: Is that a security issue?</p>

<p>Google Authenticator stores everything in the clear in Sqlite: Is that a security issue?</p>

<p>I am going to reach out to Google for comment about this one.  But for now, you have the details and know-how to move this file as you see fit.  No more having to reset 17+ accounts, just for an Android update!</p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="Google Authenticator's Databases: Copy, Move and Fix" href="/technology/hardware/google-authenticator-databases-move-copy-fix.html#comments" data-disqus-url="http://eduncan911.com/technology/hardware/google-authenticator-databases-move-copy-fix.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2014-07-31T14:07:40-04:00" content="2014-07-31T14:07:40-04:00" itemprop="datePublished">Jul 31<span>st</span>, 2014</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/security/' rel='category tag'>security</a>, <a class='category' href='/category/software/' rel='category tag'>software</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/software/security/processing-credit-cards-with-tokens.html" rel="bookmark">Processing Credit Cards With Tokens?</a></h1>
        
        <meta itemprop="url" content="/software/security/processing-credit-cards-with-tokens.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p><audio preload="none" data-mins="03" data-secs="21" data-title="NPR: Visa Makes Big Move To Boost Consumer Spending Online">
<source src="http://pd.npr.org/anon.npr-mp3/npr/atc/2014/07/20140716_atc_visa_makes_big_move_to_increase_online_spending.mp3" type="audio/mpeg">
Audio player not available in your browser. Please try a newer browser.
</audio></p>

<p>Heard this on NPR and decided to investigate further because at first glance it looks like a good idea &ndash; at least from a developer&rsquo;s perspective.</p>

<p>From the PaymentNews website, I found this announcement.</p>

<blockquote><p>Tokenization is the process of replacing a traditional card account number with a unique payment token that is restricted in how it can be used with a specific device, merchant, transaction type or channel. When using tokenization, merchants and digital wallet operators do not need to store card account numbers; instead they are able to store payment tokens that can only be used for their designated purpose. The tokenization process happens in the background in a manner that is expected to be invisible to the consumer.</p><footer><strong>EMVCo to Work on Payment Tokenization Standards</strong> <cite><a href='http://www.paymentsnews.com/2014/01/emvco-to-work-on-payment-tokenization-standards.html'>www.paymentsnews.com/2014/01/&hellip;</a></cite></footer></blockquote>


<p>Visa calls it, <a href="https://checkout.visa.com/index.jsp?country=US">VISA checkout</a> and it is supposed to remove the burden of entering a credit card from your smartpohone.</p>

<p>Looking better.  But wait a minute, how do you secure/access a token?</p>

<p>Turns out they are expecting users to sign in with a &ldquo;<em>simple username and password, easy to remember</em>.&rdquo;  And there inlies my first cringe &ndash; passwords?  Let me explain why that is a roadblock IMO:</p>

<ul>
<li>Either the <a href="http://en.wikipedia.org/wiki/Password_policy">password requirements</a> will be a road block for anyone to easily type or remember.</li>
<li>Or, the password will be a weaker password &ndash; easy for people to remember, and also to reuse for, say, a forum login <a href="http://lifehacker.com/5853483/a-guide-to-sniffing-out-passwords-and-cookies-and-how-to-protect-yourself-against-it">that can easily get sniffed</a>.</li>
</ul>


<p>Sure, you can mitigate the complex passwords with a password manager.  But, not everyone uses those and some would argue <a href="/software/security/password-managers-are-not-immune-to-hacks-themselves.html">a password manager is also a bad idea</a>.</p>

<p>Today if presented with an &ldquo;enter credit card details below&rdquo; with an option to &ldquo;sign in with Visa Checkout instead&rdquo;, I still enter the raw CC details.  Which that in and of itself is the problem VISA is trying to fix by focusing the burden on secure storage of those CC details with VISA themselves, instead of the mom-n-pop cake shop&rsquo;s PHP website that is asking for my CC.</p>

<p>What I would suggest is to take a more two-factor approach to authentication.  Something that involves a simple password, one that is easy to remember; but also, you need to have a second factor of authentication &ndash; like a keyfob or fingerprint reader or possibly even, gasp, something as simple as <a href="http://en.wikipedia.org/wiki/Google_Authenticator">Google&rsquo;s Authenticator</a> that has worked perfectly for me for many websites and devices.</p>

<p>But sadly, we will continue to be forced to obey the <a href="http://www.taipeitimes.com/News/editorials/archives/2010/09/10/2003482490">false sense of security of complex passwords</a>.</p>

<p>Also see: <a href="/software/security/passwords-when-security-gets-in-the-way.html">Passwords &ndash; When Security Gets in the Way</a></p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="Processing Credit Cards With Tokens?" href="/software/security/processing-credit-cards-with-tokens.html#comments" data-disqus-url="http://eduncan911.com/software/security/processing-credit-cards-with-tokens.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2014-07-31T13:56:49-04:00" content="2014-07-31T13:56:49-04:00" itemprop="datePublished">Jul 31<span>st</span>, 2014</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/fcc/' rel='category tag'>fcc</a>, <a class='category' href='/category/technology/' rel='category tag'>technology</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/technology/fcc/fcc-crashed-again-for-net-neutrality.html" rel="bookmark">FCC Crashed Again for Net Neutrality</a></h1>
        
        <meta itemprop="url" content="/technology/fcc/fcc-crashed-again-for-net-neutrality.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p><audio preload="none" data-mins="01" data-secs="49" data-title="NPR: FCC Extending Net Neutrality Commenting Time After Site Buckles">
<source src="http://pd.npr.org/anon.npr-mp3/npr/me/2014/07/20140716_me_fcc_extending_net_neutrality_commenting_time_after_site_buckles.mp3?dl=1" >
Audio player not available in your browser. Please try a newer browser.
</audio></p>

<blockquote><p>A flood of comments about net neutrality crashed the Federal Communications Commission&#8217;s commenting site on Tuesday, the original deadline for public comments on the controversial Internet proposal. But the tech problems are buying those who want to weigh in some extra time — the deadline for public commenting is now Friday (July 18th, 2014) at midnight.</p><footer><strong>FCC Extending Net Neutrality Commenting Time After Site Buckles</strong> <cite><a href='http://www.npr.org/blogs/alltechconsidered/2014/07/15/331798176/fcc-extending-net-neutrality-commenting-time-after-site-buckles'>www.npr.org/blogs/2014/07/15/&hellip;</a></cite></footer></blockquote>


<p>Thank you everyone for <a href="/technology/fcc/only-2-days-left-to-crash-the-fcc.html">answering my call to crash the FCC</a>.</p>

<p>Well, at least I&rsquo;d like to think I had a hand in it with my awesome blog posts on the matter.  :)</p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="FCC Crashed Again for Net Neutrality" href="/technology/fcc/fcc-crashed-again-for-net-neutrality.html#comments" data-disqus-url="http://eduncan911.com/technology/fcc/fcc-crashed-again-for-net-neutrality.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2014-07-30T16:11:41-04:00" content="2014-07-30T16:11:41-04:00" itemprop="datePublished">Jul 30<span>th</span>, 2014</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/security/' rel='category tag'>security</a>, <a class='category' href='/category/software/' rel='category tag'>software</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/software/security/password-managers-are-not-immune-to-hacks-themselves.html" rel="bookmark">Password Managers Are Not Immune to Hacks Themselves</a></h1>
        
        <meta itemprop="url" content="/software/security/password-managers-are-not-immune-to-hacks-themselves.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p><a href="http://www.darkreading.com/cloud/hacking-password-managers/d/d-id/1297250">Hacking Password Managers</a></p>

<p><img src="/blog/images/hacking-password-managers.jpg" title="Hacking Password Managers" ></p>

<blockquote><p>&#8220;Our attacks are severe: in four out of the five password managers we studied (LastPass, RoboForm, My1login, PasswordBox, and NeedMyPassword), an attacker can learn a user’s credentials for arbitrary websites. We find vulnerabilities in diverse features like one-time passwords, bookmarklets, and shared passwords. The root-causes of the vulnerabilities are also diverse: ranging from logic and authorization mistakes to misunderstandings about the web security model, in addition to the typical vulnerabilities like CSRF and XSS. Our study suggests that it remains to be a challenge for the password managers to be secure.&#8221;</p><p>&#8220;We found critical vulnerabilities in all three bookmarklets we studied,&#8221; the researchers report. &#8220;If a user clicks on the bookmarklet on an attacker’s site, the attacker, in all three cases, learns credentials for arbitrary websites.&#8221;</p><p>&#8220;Our work is a wake-up call for developers of web-based password managers. The wide spectrum of discovered vulnerabilities, however, makes a single solution unlikely. Instead, we believe developing a secure web-based password manager entails a systematic, defense-in-depth approach&#8230; Future work includes creating tools to automatically identify such vulnerabilities and developing a principled, secure-by-construction password manager.&#8221;</p><footer><strong>Hacking Password Managers</strong> <cite><a href='http://www.darkreading.com/cloud/hacking-password-managers/d/d-id/1297250'>www.darkreading.com/cloud/d/&hellip;</a></cite></footer></blockquote>


<p>I can&rsquo;t believe we are still talking about CSRF attacks.  And for websites claiming to be <em>secured</em> for passwords themselves?  Isn&rsquo;t it a common job interview question by now (or better yet, a coding exercise) for developers in how to prevent CSRF attacks?</p>

<p>Oh yeah, and how most of the common web-based password managers are all hackable.  Sure, they fixed THIS vulnerability.  Then when the next zero-day is found, it will be fixed.  And the next and the next.</p>

<p>I use a password manager.  It is not web based, does not integrate into any browser, and still requires manual intervention to open and view &ndash; with copy-n-paste only possible in some circumstances which makes the annoyance ever more livable after reading this article.</p>

<p>Can&rsquo;t wait until next month (August) for the paper to be released.</p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="Password Managers Are Not Immune to Hacks Themselves" href="/software/security/password-managers-are-not-immune-to-hacks-themselves.html#comments" data-disqus-url="http://eduncan911.com/software/security/password-managers-are-not-immune-to-hacks-themselves.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2014-07-24T16:58:17-04:00" content="2014-07-24T16:58:17-04:00" itemprop="datePublished">Jul 24<span>th</span>, 2014</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/security/' rel='category tag'>security</a>, <a class='category' href='/category/software/' rel='category tag'>software</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/software/security/passwords-when-security-gets-in-the-way.html" rel="bookmark">Passwords - When Security Gets in the Way</a></h1>
        
        <meta itemprop="url" content="/software/security/passwords-when-security-gets-in-the-way.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p><a href="http://jnd.org/dn.mss/when_security_gets_in_the_way.html">When Security Gets in the Way</a></p>

<p><img src="/blog/images/when-security-gets-in-the-way.jpg" title="When Security Gets in the Way" ></p>

<blockquote><p>The numerous incidents of defeating security measures prompts my cynical slogan: The more secure you make something, the less secure it becomes. Why? Because when security gets in the way, sensible, well-meaning, dedicated people develop hacks and workarounds that defeat the security. Hence the prevalence of doors propped open by bricks and wastebaskets, of passwords pasted on the fronts of monitors or hidden under the keyboard or in the drawer, of home keys hidden under the mat or above the doorframe or under fake rocks that can be purchased for this purpose.</p><p>We are being sent a mixed message: on the one hand, we are continually forced to use arbitrary security procedures. On the other hand, even the professionals ignore many of them. How is the ordinary person to know which ones matter and which don&#8217;t? The confusion has unexpected negative side-effects. I once discovered a computer system that was missing essential security patches. When I queried the computer&#8217;s user, I discovered that the continual warning against clicking on links or agreeing to requests from pop-up windows had been too effective. This user was so frightened of unwittingly agreeing to install all those nasty things from &#8220;out there&#8221; that all requests were denied, even the ones for essential security patches. On reflection, this is sensible behavior: It is very difficult to distinguish the legitimate from the illegitimate. Even experts slip up, as the confessions reported occasionally in various computer digests I attest.</p><footer><strong>Don Norman</strong> <cite><a href='http://jnd.org/dn.mss/when_security_gets_in_the_way.html'>jnd.org/dn.mss/&hellip;</a></cite></footer></blockquote>


<p>I recall many years ago when Microsoft proclaimed the end of password management woes with long and memorial <a href="http://technet.microsoft.com/en-us/library/cc512624.aspx">Pass Phrases</a>.  I personally started to really get annoyed at websites that didn&rsquo;t allow me to enter spaces or the password length was something small like 16 characters.</p>

<p>As a previous IT Administrator, having to reset so many user passwords because they locked themselves out or just plain forgot their had-to-change-ever-60-days password, I saw first hand the annoyances that most had with passwords.</p>

<p>It wasn&rsquo;t until just a few years ago that the buzz around complex passwords started to shift to a &ldquo;false sense of security&rdquo; statue.  Which is very true because I have personally <a href="http://en.wikipedia.org/wiki/Brute-force_attack">brute-force attacked</a> several passwords (in the name of education, of course).</p>

<p>Seeing how fast my X79 6-core desktop with over 5,760 GPU cores could churn through a few billion password combinations to guess a 20 character TruCrypt volume (it took only 4 hours by the way), the era of complex passwords deterring hackers is over &ndash; way way over since this hardware can easily be purchased off the shelf by anyone &ndash; and I still have room for another 6000 GPU cores if I ever upgraded.  That&rsquo;s just insane &ndash; 12,000 GPU cores in a single machine.</p>

<h2>Smart Password Hashing</h2>

<p>Now, some password managers are smart.  It wasn&rsquo;t until I read into KeePass&#8217; <a href="http://keepass.info/help/base/security.html#secdictprotect">protection against Dictionary Attacks</a> did I realize a whole &lsquo;nother way of preventing brute-force attacks.  KeePass describes their password hashing like this:</p>

<blockquote><p>You can&#8217;t really prevent these [brute-force dictionary] attacks: nothing prevents an attacker to just try all possible keys and look if the database decrypts. But what we can do (and KeePass does) is to make it harder: by adding a constant work factor to the key initialization, we can make them as hard as we want.</p><footer><strong>KeePass - Protection against Dictionary Attacks</strong> <cite><a href='http://keepass.info/help/base/security.html#secdictprotect'>keepass.info/help/base/&hellip;</a></cite></footer></blockquote>


<p>Please go read the rest of that quote for extreme details.  But in short, here is what they do:</p>

<ul>
<li>Take your Master password and hash it.</li>
<li>Hash it another <em>N</em> number of times based on a simple pre-determined algorithm (think: PreviousHash + &ldquo;A Salt&rdquo;, PreviousHash + &ldquo;B Salt&rdquo;, etc).</li>
</ul>


<p>The trick that makes this work is that <em>N</em> should be a number of cycles that it takes your computer to compute in about 1 second.  By default, they set it to 6000 to allow for older mobile phones to be able to open the password database within about a second or two.  But this should be much higher.  Like, on a factor of 100,000 times higher.</p>

<p>For example, that same 6-core X79 CPU and 5,760 GPU core desktop I used to crack that 20-character TruCrypt could generate about 18,000,000 passwords each second.  But, when I opened KeePass and told it to calculate how many hashes it needed to perform to take at least 1 second on this machine, the answer was 23,000,000.</p>

<p>So how does rehashing 23,000,000 times work, you may ask?  Instead of my computer generating 23,000,000 passwords a second in a brute-force attack, it follows a pre-determined algorithm hashing 23,000,000 times to generate only 1 password.</p>

<p>I&rsquo;ll let that sink in for a moment&hellip;</p>

<p>If a hackers machine is busy generating only 1 password per second, the possibility of brute force attacking a database goes from 23,000,000 per second down to just 1 per second.</p>

<p>No hacker in the world is going to continue brute-forcing that database.  Most likely they will just look for the <a href="http://www.reuters.com/article/2014/03/31/us-usa-security-nsa-rsa-idUSBREA2U0TY20140331">NSA backdoors available in everything</a> at that point.</p>

<p>I&rsquo;ll end with a final quote from our buddy Don from earlier.</p>

<blockquote><p>Although there is much emphasis on passwords security most break-ins occur through other means. How do thieves break into systems? They usually don&#8217;t use brute force. They phish, luring unsuspecting but helpful people to tell them their login name and password. Or they install sniffers on keyboards and record everything that was typed. The strength of passwords is irrelevant if the thief has already discovered it.</p><footer><strong>Don Norman</strong> <cite><a href='http://jnd.org/dn.mss/when_security_gets_in_the_way.html'>jnd.org/dn.mss/&hellip;</a></cite></footer></blockquote>



  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="Passwords - When Security Gets in the Way" href="/software/security/passwords-when-security-gets-in-the-way.html#comments" data-disqus-url="http://eduncan911.com/software/security/passwords-when-security-gets-in-the-way.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2014-07-23T19:50:40-04:00" content="2014-07-23T19:50:40-04:00" itemprop="datePublished">Jul 23<span>rd</span>, 2014</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/hardware/' rel='category tag'>hardware</a>, <a class='category' href='/category/technology/' rel='category tag'>technology</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/technology/hardware/google-nexus-10-and-apple-wireless-keyboard.html" rel="bookmark">Google Nexus 10 and Apple Wireless Keyboard</a></h1>
        
        <meta itemprop="url" content="/technology/hardware/google-nexus-10-and-apple-wireless-keyboard.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p>I have been fighting an ongoing battle with Apple&rsquo;s Wireless Keyboards and a tablet of mine, the Google Nexus 10.  While the keyboard works with all other Android and Apple devices we have (Nexus 5, Nexus 7 2013, Galaxy Nexus and Apple iPod Touch), it does not work with the Google Nexus 10.  I&rsquo;ve gone as far as to <a href="http://android.stackexchange.com/questions/66496/android-4-4-apple-bluetooth-keyboard-paired-but-not-working">asking for help on SE</a>.</p>

<p>Well, that&rsquo;s not entirely accurate.  The story started with a used Apple Wireless Keyboard I got from eBay.  It paired and worked fine; but, some of the keys did not work.  So I bought a new one from Apple.com.</p>

<p>It paired and connected just fine; but, the brand spanking new keyboard did not work.  The Nexus 10 would not recognize an additional input device (the small &ldquo;A&rdquo; symbol in the top left corner of the screen).</p>

<p>To reiterate, this new Apple Wireless Keyboard ordered direct from Apple.com worked fine with all other Android devices (Android 4.2.2, 4.4.2, 4.4.3 and 4.4.4) and the iPod Touch 4th Gen.  It is only this Nexus 10 (Android 4.4.3 and 4.4.4) that it did not.</p>

<h2>Nexus 10 Bluetooth Stack</h2>

<p>As I blogged some time ago, not all <a href="http://eduncan911.com/blog/archives/bluetooth-expedition-the-right-stuff.html">Bluetooth devices are made equal</a>.   Devices implement the Bluetooth stack differently and sometimes miss an implementation detail.</p>

<p>I highly suspect the Nexus 10 has a flawed Bluetooth implementation, causing this incompatibility.</p>

<p>But what exactly is it incompatible with?  It worked fine with the previous Apple keyboard I got used on eBay.  It works fine with all other bluetooth keyboards I have tried.</p>

<p>Why this one Apple keyboard I got direct from apple.com?</p>

<h2>Apple Wireless Keyboard version: 2007, 2009 and 2011</h2>

<p>Atlas only after several trips to some local Apple stores did I stumble onto the issue: there are three versions of the Apple Wireless Keyboard that were sold.  I found this out by looking at about a dozen different iMacs they had, from old to new.  Surprisingly Apple&rsquo;s newest store located in NYC, in Grand Central Terminal, is the one that had the largest collection of older iMacs &ndash; ones that actually had the 2009 keyboard and even one with the 2007 keyboard.</p>

<p>They are identified by their model years.  To take a quote <a href="http://support.apple.com/kb/ht4112">directly from Apple&rsquo;s support site</a>:</p>

<blockquote><p>* Apple Wireless Keyboard (2011): Features an aluminum case and uses two AA batteries. You can identify this model by the following icons on the F3 and F4 keys:</p><p><img src="http://km.support.apple.com/library/APPLE/APPLECARE_ALLGEOS/HT4112/HT4112_01----en.png" /></p><p>* Apple Wireless Keyboard (2009): Features an aluminum case and uses two AA batteries. You can identify this model by the following icons on the F3 and F4 keys:</p><p><img src="http://km.support.apple.com/library/APPLE/APPLECARE_ALLGEOS/HT4112/HT4112_02----en.png" /></p><p>* Apple Wireless Keyboard (2007): Features an aluminum case and uses three AA batteries.</p><footer><strong>Apple Support</strong> <cite><a href='http://support.apple.com/kb/ht4112'>&#8220;Apple Wireless Keyboard Compatibility&#8221;</a></cite></footer></blockquote>


<p>So, we have three keyboards available to us.  After many trials and errors, I can safely say&hellip;</p>

<h2>Get the 2009 Apple Wireless Keyboard model</h2>

<p>The used eBay model I got was a 2009 and it worked fine, dispite a few keys not working.  The Apple.com model I got was an 2011 with the latest x80 firmware &ndash; and it did not work.</p>

<p>You want to focus on the F3 and F4 keys looking like this:</p>

<p><img src="/blog/images/google-nexus-10-and-apple-wireless-keyboard-2009.jpg" title="Nexus 10 and 2009 Apple Wireless Keyboard" ></p>

<p>Again, the 2011 keyboard works fine with all other Android devices, even back to Android 4.2 on my Galaxy Nexus.  So this is clearly a fault with the Nexus 10&rsquo;s bluetooth hardware.</p>

<p>But none the less, if you want an Apple Wireless Keyboard to work with your Nexus 10, you better seek out the 2009 model.</p>

<h2>2009 Apple Wireless Keyboard Firmware</h2>

<p>And btw, the firmware version of the 2009 I found working at an Apple store has firmware version x50.  You can see it under the system&rsquo;s properties, like this:</p>

<p><img src="/blog/images/google-nexus-10-and-apple-wireless-keyboard-2009-firmware.jpg" title="Nexus 10 and 2009 Apple Wireless Keyboard Firmware" ></p>

<p>I only mention the firmware because I found a number of posts online where people upgraded their 2009 and 2011 keyboard firmwares to the latest, and lost some functionality.  I am not sure if the x50 version of the firmware is the latest.  I am only stating the exact version of the 2009 keyboard that worked flawlessly with the Nexus 10.</p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="Google Nexus 10 and Apple Wireless Keyboard" href="/technology/hardware/google-nexus-10-and-apple-wireless-keyboard.html#comments" data-disqus-url="http://eduncan911.com/technology/hardware/google-nexus-10-and-apple-wireless-keyboard.html">Leave a comment</a>
      </section>
    </article>
  
    
    <article class="post type-post status-publish format-standard hentry category-schweeeet" itemscope itemtype="http://schema.org/Article">
      <header class="post-header">   
        <span class="post-meta">
          <span class="posted-on"><time class="entry-date published date updated" datetime="2014-07-13T10:41:03-04:00" content="2014-07-13T10:41:03-04:00" itemprop="datePublished">Jul 13<span>th</span>, 2014</time></span>
          <span class="byline"> by <span class="author vcard"><a class="url fn n" href="https://plus.google.com/+EricDuncan911?rel=author">Eric Duncan</a></span></span>
          in <a class='category' href='/category/fcc/' rel='category tag'>fcc</a>, <a class='category' href='/category/technology/' rel='category tag'>technology</a>
        </span>
        <h1 class="post-title entry-title" itemprop="name"><a href="/technology/fcc/only-2-days-left-to-crash-the-fcc.html" rel="bookmark">Only 2 Days Left to Crash the FCC</a></h1>
        
        <meta itemprop="url" content="/technology/fcc/only-2-days-left-to-crash-the-fcc.html" />
      </header>
      <section class="post-content" itemprop="articleBody">

<!-- BEGIN MARKDOWN CONTENT: I can't control the formatting here, bleh -->      

<p><a href="http://www.npr.org/blogs/alltechconsidered/2014/06/03/318458496/john-oliver-helps-rally-45-000-net-neutrality-comments-to-fcc">John Oliver Helps Rally 45,000 Net Neutrality Comments To FCC</a></p>

<div class="embed-video-container"><iframe src="http://www.youtube.com/embed/fpbOEoRrHyU " frameborder="0" allowfullscreen></iframe></div>


<p>There&rsquo;s only two days left for comments.  At the time I left mine a month ago, there were 65,000 comments.  Now, there are 205,000.</p>

<p><a href="http://www.fcc.gov/comments">The url to file your comments: fcc.gov/comments</a></p>

<p>The YouTube video hit on every point I&rsquo;ve been saying in person when talking about this, and many more.</p>

<p>One of my biggest I tell people is how the former chairman of the FCC left (forced out?), and the new one put in place by Obama last year previously ran (as in chaired and commanded) the lobbying firm for Cable and Wireless (e.g. Comcast and TimeWarner) which was directly responsible for the last attempt to create the two-tier system that the FCC blocked.  And, that sued the government to force this actual change.</p>

<p>Translation by the current FCC chairman: &ldquo;We didn&rsquo;t win last time. Ok, let&rsquo;s sue the FCC/government to force a rule change. When we win the lawsuit, I&rsquo;ll step down as head of this lobbyist group and become head of the FCC [so I can force this rule through].&rdquo;</p>

<p>How fracked up is that?</p>

<p>Also it sucks that NetFlix already has to pay Comcast to get service to its users.</p>


  

<!-- END MARKDOWN CONTENT -->

      </section>
      <section class="post-comment">
      <span class="comments-link">
        <a class="comment-count" title="Only 2 Days Left to Crash the FCC" href="/technology/fcc/only-2-days-left-to-crash-the-fcc.html#comments" data-disqus-url="http://eduncan911.com/technology/fcc/only-2-days-left-to-crash-the-fcc.html">Leave a comment</a>
      </section>
    </article>
  
    <nav class="pagination navigation paging-navigation pagenation-spacer" role="navigation">
      <div class="nav-links">
        <div class="older-posts"><a href="/blog/page/2/" title="Older Posts">&laquo; Older Posts </a></div>
        
      </div>
    </nav>
  </main>

  <footer id="colophon" class="site-footer" role="contentinfo">
    <a class="subscribe icon-feed" href="/atom.xml"><span class="tooltip">Subscribe!</span></a>
    <div><a href="/blog">Blog</a></div>
    <div><a href="/stem">STEM</a></div>
    <div><a href="/blog/archives">Archives</a></div>
    <div><a href="/contact">Contact Me</a></div>
    <div><a href="/buymeabeer">Buy Me a Beer</a></div>
    <div><a href="/blogtegrity">Blogtegrity</a></div>
    <div><a href="/keys">PGP Keys</a></div>
    <div><a href="/privacy">Privacy</a></div>
    <div>&nbsp;</div>
    <div class="site-info inner"><section class="copyright">© 2017 Eric Duncan <a href="http://creativecommons.org/licenses/by/2.5/">CC BY 2.5</a></section></div>
    <div>a <a href="http://www.forgetfoo.me/" title="one of a 100 kickass designs by this guy">forgetfoo</a> design</div>
  </footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script type='text/javascript' src='/javascripts/foo.casper.js?ver=20140422'></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3705711-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>





</body>
</html>
